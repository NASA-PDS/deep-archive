

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>üèÉ‚Äç‚ôÄÔ∏è Usage &mdash; PDS Deep Archive  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="üë©‚Äçüíª Development" href="../development/index.html" />
    <link rel="prev" title="üì¶ Installation" href="../installation/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> PDS Deep Archive
          

          
            
            <img src="../_static/PDS_Planets.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">üì¶ Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">üèÉ‚Äç‚ôÄÔ∏è Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-information">Usage Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-1-basic-usage-on-local-files">Example 1: Basic Usage on Local Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-2-bundle-referencing-collections-by-lid">Example 2: Bundle Referencing Collections by LID</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-3-generating-deep-archives-of-remote-data-in-a-pds-registry">Example 3: Generating Deep Archives of Remote Data in a PDS Registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pds-delivery-checklist">PDS Delivery Checklist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">üë©‚Äçüíª Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">üöë Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDS Deep Archive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>üèÉ‚Äç‚ôÄÔ∏è Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usage/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="usage">
<h1>üèÉ‚Äç‚ôÄÔ∏è Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¬∂</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¬∂</a></h2>
<p>This package provides two primary executables, <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span></code> and
<code class="docutils literal notranslate"><span class="pre">pds-deep-registry-archive</span></code>, that generate both an Archive Information
Package (AIP) and a Submission Information Package (SIP). The SIP is what is
delivered by the PDS to the NASA Space Science Data Coordinated Archive
(NSSDCA). For more information about the products produced, see the following
references:</p>
<ul class="simple">
<li><p>OAIS Information - <a class="reference external" href="http://www.oais.info/">http://www.oais.info/</a></p></li>
<li><p>AIP Information - <a class="reference external" href="https://www.iasa-web.org/tc04/archival-information-package-aip">https://www.iasa-web.org/tc04/archival-information-package-aip</a></p></li>
<li><p>SIP Information - <a class="reference external" href="https://www.iasa-web.org/tc04/submission-information-package-sip">https://www.iasa-web.org/tc04/submission-information-package-sip</a></p></li>
</ul>
<p>You use <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span></code> for PDS data on your hard drive, network
filesystem, etc.; you use <code class="docutils literal notranslate"><span class="pre">pds-deep-registry-archive</span></code> for PDS data in a
PDS Registry.</p>
<p>This package also comes with the two sub-components of <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span></code>
that can be ran individually:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">aipgen</span></code> that generates Archive Information Packages from a PDS4 bundle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sipgen</span></code> that generates Submission Information from a PDS4 bundle</p></li>
</ul>
<p>These work just with local files, not the PDS Registry.</p>
</section>
<section id="usage-information">
<h2>Usage Information<a class="headerlink" href="#usage-information" title="Permalink to this headline">¬∂</a></h2>
<p>Running <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span> <span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">pds-deep-registry-archive</span> <span class="pre">--help</span></code> to
get summaries of the command-line invocations, required arguments, and any
options that refine the behavior.</p>
</section>
<section id="example-1-basic-usage-on-local-files">
<h2>Example 1: Basic Usage on Local Files<a class="headerlink" href="#example-1-basic-usage-on-local-files" title="Permalink to this headline">¬∂</a></h2>
<p>For example, to create a SIP and AIP from the LADEE 1101 Bundle located at
<code class="docutils literal notranslate"><span class="pre">test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml</span></code> run the
following (NOTE: assumes you followed the default Installation into a Virtual
Environment); note that lines starting with the octothorp <code class="docutils literal notranslate"><span class="pre">#</span></code> are comments
to help explain what follows and need not be typed in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Prep your environment by sourcing your Python virtual environment
$ source $HOME/.virtualenvs/pds-deep-archive/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">source</span></code> command and the location of your Python virtual
environment may vary depending on the command-line interpreter (terminal)
you‚Äôre using and the installation of Python. You may wish to consult a
system administrator for clarification. In some cases, it may involve
simply replacing <code class="docutils literal notranslate"><span class="pre">source</span></code> with a single period <code class="docutils literal notranslate"><span class="pre">.</span></code>; in others, it
may be more involved, especially the location of your Python virtual
environment.</p>
</aside>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># The (pds-deep-archive) prefix indicates your virtual environment is active
(pds-deep-archive) $
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The changes the the prompt may not necessarily appear depending on
the local machine environment, command interpreter, etc.</p>
</aside>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Now let&#39;s run pds-deep-archive
# NOTE: This software must be run against data on your local filesystem
(pds-deep-archive) $ pds-deep-archive -s PDS_ATM  \
    -b https://atmos.nmsu.edu/PDS/data/PDS4/LADEE/  \
    test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The trailing backslashes above are ‚Äúcontinuation characters‚Äù to
indicate to the command shell that the entire command line spans multiple
physical lines. You may choose to enter the command on a single long
physical line without the backslashes. Regardless, please consult your
documentation regarding what the proper continuation character is for
your shell; in the most common cases, it is a backslash.</p>
</aside>
<p>From this command-line execution, we are inputting the following information:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">PDS_ATM</span></code> - uses <code class="docutils literal notranslate"><span class="pre">-s</span></code> flag to specify Atmospheres Node as the
provider site for the manifest‚Äôs label</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">https://atmos.nmsu.edu/PDS/data/PDS4/LADEE/</span></code> - uses <code class="docutils literal notranslate"><span class="pre">-b</span></code> flag Base
URL for Node data archive. This URL will be prepended to the bundle
directory to form URLs to the products. For this case, this will allow us
to form proper URLs in the output manifests based upon the valid online
products, e.g.
<a class="reference external" href="https://atmos.nmsu.edu/PDS/data/PDS4/LADEE/mission_bundle/LADEE_Bundle_1101.xml">https://atmos.nmsu.edu/PDS/data/PDS4/LADEE/mission_bundle/LADEE_Bundle_1101.xml</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml</span></code> - this is the
final positional argument input to the software that specifies the bundle
product file on the local filesystem.</p></li>
</ul>
<p>Once you complete this execution, the program will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INFO üëü PDS Deep Archive, version VERSION-NUMBER
INFO üèÉ‚Äç‚ôÄÔ∏è Starting AIP generation for test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml
INFO üéâ Success! AIP done, files generated:
INFO üìÑ Checksum manifest: ladee_mission_bundle_v1.0_checksum_manifest_v1.0_DATE.tab
INFO üìÑ Transfer manifest: ladee_mission_bundle_v1.0_transfer_manifest_v1.0_DATE.tab
INFO üìÑ XML label for them both: ladee_mission_bundle_v1.0_aip_v1.0_DATE.xml
INFO üèÉ‚Äç‚ôÄÔ∏è Starting SIP generation for test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml
INFO üéâ Success! From /SOME/DIR/test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml, generated these output files:
INFO üìÑ SIP Manifest: ladee_mission_bundle_v1.0_sip_v1.0_DATE.tab
        allcollections=args.include_latest_collection_only,
INFO üìÑ XML label for the SIP: ladee_mission_bundle_v1.0_sip_v1.0_DATE.xml
INFO üëã That&#39;s it! Thanks for making an AIP and SIP with us today. Bye!
</pre></div>
</div>
<p>This creates 5 output files in the current directory as part of the AIP and
SIP Generation (with DATE replaced by the current date):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_checksum_manifest_v1.0_DATE.tab</span></code>, the checksum manifest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_transfer_manifest_v1.0_DATE.tab</span></code>, the transfer manifest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_aip_v1.0_DATE.xml</span></code>, the label for these two files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_sip_v1.0_DATE.tab</span></code>, the created SIP manifest as a
tab-separated values file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_sip_v1.0_DATE.xml</span></code>, an PDS label for the SIP file.</p></li>
</ul>
<p>Be sure to check out the SIP Manifest,
<code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_sip_v1.0_DATE.tab</span></code>, to ensure the URLs included are
valid URLs.</p>
<p>If everything looks good to go, package them up into a PDS Deep Archive data
package (e.g. <code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_pds_deep_archive.zip</span></code>).</p>
<p>Create a new <a class="reference external" href="https://github.com/NASA-PDS/pdsen-operations/issues/new/choose">PDS4 NSSDCA Delivery Github Issue</a> for the PDS Engineering Node to submit the package to NSSDCA</p>
</section>
<section id="example-2-bundle-referencing-collections-by-lid">
<h2>Example 2: Bundle Referencing Collections by LID<a class="headerlink" href="#example-2-bundle-referencing-collections-by-lid" title="Permalink to this headline">¬∂</a></h2>
<p>For running the software on an accumulating bundle, you have two options:</p>
<p><strong>Option 1: (preferred) Run ``pds-deep-archive`` against the entire bundle and all versions of all collections present beneath the bundle root directory.</strong></p>
<p>This is the default functionality of <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span></code>. See <a class="reference internal" href="#example-1-basic-usage-on-local-files">Example 1: Basic Usage on Local Files</a> to execute using this option.</p>
<p><strong>Option 2: Run ``pds-deep-archive`` against the bundle with only the current versions of the collections present beneath the bundle root directory.</strong></p>
<p>Execute the software with the <code class="docutils literal notranslate"><span class="pre">--include-latest-collection-only</span></code> flag enabled, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pds-deep-archive) $ pds-deep-archive -s PDS_ATM  \
    -b https://atmos.nmsu.edu/PDS/data/PDS4/LADEE/  \
    test/data/ladee_test/mission_bundle/LADEE_Bundle_1101.xml
    --include-latest-collection-only
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same admonitions about the command prompt and continuation
characters mentioned earlier applies to the above example.</p>
</aside>
</section>
<section id="example-3-generating-deep-archives-of-remote-data-in-a-pds-registry">
<h2>Example 3: Generating Deep Archives of Remote Data in a PDS Registry<a class="headerlink" href="#example-3-generating-deep-archives-of-remote-data-in-a-pds-registry" title="Permalink to this headline">¬∂</a></h2>
<p>Assuming the software is installed properly and the virtual Python environment
is still set up as above, then the following invocation will generate the AIP
checksum and transfer manifests and the SIP manifest for the bundle
<code class="docutils literal notranslate"><span class="pre">urn:nasa:pds:insight_documents::2.0</span></code> using the PDS Registry API at
<code class="docutils literal notranslate"><span class="pre">https://pds.nasa.gov/api/search/1.0/</span></code> for the site <code class="docutils literal notranslate"><span class="pre">PDS_ATM</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pds-deep-archive) $ bin/pds-deep-registry-archive \
    --site PDS_ATM \
    urn:nasa:pds:insight_documents::2.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same admonitions about the command prompt and continuation
characters mentioned earlier applies to the above examples.</p>
</aside>
<p>This writes 5 output files in the current directory as part of the AIP and
SIP Generation, but without needing to read any local files; these files
include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">insight_documents_v2.0_checksum_manifest_v1.0_DATE.tab</span></code>, the checksum manifest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insight_documents_v2.0_transfer_manifest_v1.0_DATE.tab</span></code>, the transfer manifest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insight_documents_v2.0_aip_v1.0_DATE.xml</span></code>, the label for these two files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insight_documents_v2.0_sip_v1.0_DATE.tab</span></code>, the created SIP manifest as a
tab-separated values file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insight_documents_v2.0_sip_v1.0_DATE.xml</span></code>, an PDS label for the SIP file.</p></li>
</ul>
<p>As with <code class="docutils literal notranslate"><span class="pre">pds-deep-archive</span></code>, you can also specify <code class="docutils literal notranslate"><span class="pre">--include-latest-collection-only</span></code> to select if you want just the latest version of LID-only collections in your deep archive versus the default behavior of <strong>all</strong> versions of them.</p>
</section>
<section id="pds-delivery-checklist">
<h2>PDS Delivery Checklist<a class="headerlink" href="#pds-delivery-checklist" title="Permalink to this headline">¬∂</a></h2>
<p>The following is a checklist and procedure Discipline Node personnel should
follow when delivering a PDS Deep Archive data package to the PDS Engineering
Node upon a new release of data.</p>
<p>For more formalized details on the NSSDCA Delivery Process, see the following <a class="reference external" href="https://github.com/NASA-PDS/pds-deep-archive/tree/main/docs/PDS4_Submission_Process_v1.0.docx">process document</a>.</p>
<ol class="arabic">
<li><p>‚ñ∂  START: New Bundle is ready for Delivery.</p></li>
<li><p>Verify the Bundle has completed successful validation with PDS4 Validate Tool (no ERRORS).</p></li>
<li><p>Execute PDS Deep Archive software per usage instructions and example above.</p></li>
<li><p>Check the SIP Manifest (e.g. <code class="docutils literal notranslate"><span class="pre">ladee_mission_bundle_v1.0_sip_v1.0_20200618.tab</span></code>) file to verify URLs indicated are valid. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example of a bad URL</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">this</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">does</span><span class="o">.</span><span class="ow">not</span><span class="o">.</span><span class="n">exist</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">LADEE_Bundle_1101</span><span class="o">.</span><span class="n">xml</span>

<span class="c1"># Example of GOOD URL (file exists online)</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">atmos</span><span class="o">.</span><span class="n">nmsu</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">PDS</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">PDS4</span><span class="o">/</span><span class="n">LADEE</span><span class="o">/</span><span class="n">mission_bundle</span><span class="o">/</span><span class="n">LADEE_Bundle_1101</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</li>
<li><p>Package up the five <code class="docutils literal notranslate"><span class="pre">*.tab`</span> <span class="pre">and</span> <span class="pre">``*.xml</span></code> files into a <code class="docutils literal notranslate"><span class="pre">.ZIP</span></code> or <code class="docutils literal notranslate"><span class="pre">.TAR.GZ</span></code> PDS Deep Archive Delivery package. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">cvzf</span> <span class="n">ladee_mission_bundle_v1</span><span class="mf">.0</span><span class="n">_NSSDCA_20200702</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="n">ladee_mission_bundle_v1</span><span class="mf">.0</span><span class="n">_</span><span class="o">*.</span><span class="n">tab</span> <span class="n">ladee_mission_bundle_v1</span><span class="mf">.0</span><span class="n">_</span><span class="o">*.</span><span class="n">xml</span>
</pre></div>
</div>
</li>
<li><p>Create a new <a class="reference external" href="https://github.com/NASA-PDS/pdsen-operations/issues/new/choose">PDS4 NSSDCA Delivery Github Issue</a> for the PDS Engineering Node to submit the package to NSSDCA.</p></li>
<li><p>EN will then complete <a class="reference external" href="https://pds-engineering.jpl.nasa.gov/content/nssdca_interface_process">validation and submission to NSSDCA</a>.</p></li>
</ol>
<ol class="arabic simple" start="7">
<li><p>You can then follow along with status in the Github Issue.</p></li>
<li><p>The PDS Engineering Node Operations Team will notify you once delivery has been completed.</p></li>
</ol>
<ol class="arabic simple" start="8">
<li><p>üéâ DONE</p></li>
</ol>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../development/index.html" class="btn btn-neutral float-right" title="üë©‚Äçüíª Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../installation/index.html" class="btn btn-neutral float-left" title="üì¶ Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020 California Institute of Technology

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>